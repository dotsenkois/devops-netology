# Домашнее задание к занятию "14.1 Создание и использование секретов"

# Решение

# 1

### Как создать секрет?

```console
root@control-plane-node-01:~/certs# openssl genrsa -out cert.key 4096
Generating RSA private key, 4096 bit long modulus (2 primes)
..................++++
.........++++
e is 65537 (0x010001)
root@control-plane-node-01:~/certs# openssl req -x509 -new -key cert.key -days 3650 -out cert.crt \
> -subj '/C=RU/ST=Moscow/L=Moscow/CN=server.local'
root@control-plane-node-01:~/certs# kubectl create secret tls domain-cert --cert=cert.crt --key=cert.key
secret/domain-cert created
```

### Как просмотреть список секретов?

```console
root@control-plane-node-01:~/certs# kubectl get secrets 
NAME          TYPE                DATA   AGE
domain-cert   kubernetes.io/tls   2      66s
```

### Как просмотреть секрет?

```console
root@control-plane-node-01:~/certs# kubectl get secret domain-cert
NAME          TYPE                DATA   AGE
domain-cert   kubernetes.io/tls   2      2m52s
root@control-plane-node-01:~/certs# kubectl describe secret domain-cert
Name:         domain-cert
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  kubernetes.io/tls

Data
====
tls.crt:  1944 bytes
tls.key:  3243 bytes
```


### Как получить информацию в формате YAML и/или JSON?

```console
kubectl get secret domain-cert -o yaml
kubectl get secret domain-cert -o json
```
<details>
  <summary>kubectl get secret domain-cert -o yaml</summary>
```yaml

    apiVersion: v1
    data:
    tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZiVENDQTFXZ0F3SUJBZ0lVVkJXYTFXREtWc2Q5bmRiZ0h4T1J3SnZKRy8wd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1JqRUxNQWtHQTFVRUJoTUNVbFV4RHpBTkJnTlZCQWdNQmsxdmMyTnZkekVQTUEwR0ExVUVCd3dHVFc5egpZMjkzTVJVd0V3WURWUVFEREF4elpYSjJaWEl1Ykc5allXd3dIaGNOTWpJd09EQXpNVFEwTnpNeVdoY05Nekl3Ck56TXhNVFEwTnpNeVdqQkdNUXN3Q1FZRFZRUUdFd0pTVlRFUE1BMEdBMVVFQ0F3R1RXOXpZMjkzTVE4d0RRWUQKVlFRSERBWk5iM05qYjNjeEZUQVRCZ05WQkFNTURITmxjblpsY2k1c2IyTmhiRENDQWlJd0RRWUpLb1pJaHZjTgpBUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBTmE0dTQ3WGxuVm5GWCtTaUplUEtWYUh5NnBmVU5pbkZDeWFOaEI5CmZEbmRGME9xYndPQWM1bk5RVU92Vm0yMkdyaXpnT3pQanArMk1UcC9hT3V2SHl1VlVONUVvWlp5UXNCbXp3aUUKTzByaVkzZ3paM0ZCNy9FcmlwVE0xRmsvZUZaWVJGSnBuRDZLYzF3Nlp4c1NxMDB5OXJFY1pEMGtQS250ajN1OQpGTG0yMFNkT3NIMFFQc29NTDNScGM2WmtkazdxbGVPSkRhcVd3dC9pSEdZYXpkZldOZUNmUTZJL3VhN3pjOEViCjgzdGgrR3cxRXFpN2xzOC9iZktHbVQra3l2MmxxUCtFL211S3Awd0lheEw2RlV0dzB4VUtQVVNyN2N6RjN5bmIKZUx6QTVWQjlMaHltV3FPdFUvVXJHeFc2MkhaRThXWGJ1ZTltUlRCeXNwektKWVJFdlJOUXZDUzdVSGhtVGxrcwpJOHpuSmJ2YmU0YTY3K1ZObDQvQU5qTS92Z3owWks3ZmVmTXNub09oU0JvV1NxQ2Q2djg4THgyQmlldzNzV3cxCkhlQng0am1sY1NSMk5rTGpNam82Wlp5NjEzbVZJb2xCK1ZPV1lQUTZHaHB1MjJ0TW5YRkR0RVJ2RjhBV3FUb2EKM3hwVDVZa240VFoxdThOQ214YUxFWlBmTWRwM1RSYy9jZktHbENBQnZHTDI2Ky8rSzc4VS9UVUtUeXJpcTlEdgpSbTZieFg0NCtscjRDOGdjUXV6Sm00NklZOWU5NUdsUGhjQ3FxcTVwSy9mL0lTcS9HMXdMMVQ1cEJxUG5yeS9lClM3bEl1UmpLUTIwUUFZY1RJUlIrTEVYYnhGZElYUlFpcmdwWmlWVGJOWURaVjlCbTExaTN3ejhTSjVhOVZuTisKaHpCckFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCUitlSlFVMnFWRytqZENQMkxONzVNcTJYdGxkekFmQmdOVgpIU01FR0RBV2dCUitlSlFVMnFWRytqZENQMkxONzVNcTJYdGxkekFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHCkNTcUdTSWIzRFFFQkN3VUFBNElDQVFCZlprUEFyNHVkc2JJdUZtQm1Nc3UwT3ZOTlRlT2VQdFlOaEdFQmRwV3QKQ3dvd0NCa21sME5FSVJjY0EzTkNzU2N3UEEyQjhycy9yckhsMWV3YnRienNPWHc3ZGN4MWdpSS9VMFR2L1Y1cgpWSDNZMFZGYmlIS3BBOW9oRGp2NXhSL0hMNFN3TG5zdnNjSThTd0Q1dXlJR1hvcUZmeDk1NTNEZE12QVUwYzFCCmpMRjZ0cnBCcmZTM3NiUEVyaVE1QjVyRnlKMGVhWDIxc2ViNW9uNFZZaCtQWUdLOHJFMzcrZjRxQStHN1kvUUEKVzVNSlpSZVFUT0ZVc0Q1cWhaMkJnMVdObi9PRTlPRVU4SEVDNi9oQlY0bm04b1g4VjNrUE1SajRqejhkbm1VbgpPL3U2cmlhbXZBUHc4L0ZiZlJrdGY5aklzdmtCd2xjWDNIRU9icmIxWTlVV3dJSldJNnFaaXFoMXdEQlNvNENsCmp1aDhXR0o5ZEp6QXc1OWxML3NVUG5ISkNxR0VrRjZJNVBlK3V5a3preEVtUGR0UDdwMXBMaGNyR3FLVDZNekIKOUsyRnRSdU5WSnJQTkFvQVBqS0tkK2xYU21MSHNzbGwyRURmODcxY0gyak5sYWx0Y2szVWdTVTkzcGpBT1ZLYgpNaU1mZ3c4OHBLRmU5eU1UVHFHM0srbm1oUHh3VkRTTDRqY2NKR0RDK3NvWUptZHBmOFdhTDN6UkFqaStxMTcwClpHTnNPZ3cvTkx1NTgzbFNkOERXL1l1WE5QL0tLQ3B6SmszTTBJL0ZUMElva01WbVY2dXNab0lQTWRRbzJITUcKd0FPYUF1VER5ZU94ZjlpQldES2g4ZXQvMDdleUI4d25POHRKM3hzdlVQRFFkTC9tYmcvUG56YUEwNlJZVnlSUwo3Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBMXJpN2p0ZVdkV2NWZjVLSWw0OHBWb2ZMcWw5UTJLY1VMSm8yRUgxOE9kMFhRNnB2CkE0QnptYzFCUTY5V2JiWWF1TE9BN00rT243WXhPbjlvNjY4Zks1VlEza1NobG5KQ3dHYlBDSVE3U3VKamVETm4KY1VIdjhTdUtsTXpVV1Q5NFZsaEVVbW1jUG9welhEcG5HeEtyVFRMMnNSeGtQU1E4cWUyUGU3MFV1YmJSSjA2dwpmUkEreWd3dmRHbHpwbVIyVHVxVjQ0a05xcGJDMytJY1pock4xOVkxNEo5RG9qKzVydk56d1J2emUySDRiRFVTCnFMdVd6ejl0OG9hWlA2VEsvYVdvLzRUK2E0cW5UQWhyRXZvVlMzRFRGUW85Ukt2dHpNWGZLZHQ0dk1EbFVIMHUKSEtaYW82MVQ5U3NiRmJyWWRrVHhaZHU1NzJaRk1IS3luTW9saEVTOUUxQzhKTHRRZUdaT1dTd2p6T2NsdTl0NwpocnJ2NVUyWGo4QTJNeisrRFBSa3J0OTU4eXllZzZGSUdoWktvSjNxL3p3dkhZR0o3RGV4YkRVZDRISGlPYVZ4CkpIWTJRdU15T2pwbG5MclhlWlVpaVVINVU1Wmc5RG9hR203YmEweWRjVU8wUkc4WHdCYXBPaHJmR2xQbGlTZmgKTm5XN3cwS2JGb3NSazk4eDJuZE5Gejl4OG9hVUlBRzhZdmJyNy80cnZ4VDlOUXBQS3VLcjBPOUdicHZGZmpqNgpXdmdMeUJ4QzdNbWJqb2hqMTcza2FVK0Z3S3Fxcm1rcjkvOGhLcjhiWEF2VlBta0dvK2V2TDk1THVVaTVHTXBECmJSQUJoeE1oRkg0c1JkdkVWMGhkRkNLdUNsbUpWTnMxZ05sWDBHYlhXTGZEUHhJbmxyMVdjMzZITUdzQ0F3RUEKQVFLQ0FnQW15RFR3SnRaQkhENVF6V21vWGk0c045aThTL3p4TkxRN0hodFh2U0o3M1FmL3E3L2pWUWNNSjN0NwpPeWNVSjhrSnhUb3JDNDRLSU1FaGZMTzVwZWF1VzRqQXJJcTIvcW81MEJmaXhPZGtyaUVqSzcycVFpdVJWcmp3CkNWTHRUNzV2Y2YvZEZzQW10NkVBYm5nQzlzdEQ1VW1UVWJwMUpKOWtYY2tGbzNBajN2WkY4RHVHU3pIY0VubGIKd0ZRb0lJc1IwK01BdHRkbUVWYmZVeHFvQW4xZFY0NWhwTUoxZ3FjS0IyVEg0MEdGN25zTktFVFhmeEpOR25yRQpURFZQdm5iL2V6VmIrV3h1aGh1VGF3M1QzcUdMLzdQUVlBb1M1aTdNUm96NUpXL1lQOHJyVDhETlllcUxGNXBMCmRONnVmUkh0d3FRTExyV1ZuTll3V3ZjUnhKMGp3djhGVnhrQlg0aER3VTN3MXNtVUtObHcvdDNyVkJjR0EzK3IKdUNFWEdaTU5SMmNZYXBleE5IZ1EyS0hjZmkwWHhUMnlqM0tVeG1YRVVpT2tUcERpcGp0TVFPbXNEYzh5a1c5VQptUFZ5ODhuRGxWc1hCUnliZUtjSlQxbXAveWFGQ1VwVWVSU2VVR2h1QzQ5dTU0TG5CVzAxL1RqQVBDNmdyandQCkpVd3VIZ3dXNmJSOTUxNlpzMjJYTDk4NndBR1FQZE00U2RSRE01YlJJN0NxcnVtaDMxQWtMb1Y2bTMxR1B1aXoKNVpYQ2hpSkRNNWRKZUxzWXI3b2J6RnJaZGNhNUJwb1ZkTEY0TEFRVE1STjVzeDZGWnRsTjE2c01kU0pyNmtPdApmekdFMjA2QVA5cngxWXJzd085T3NJNUJVTlBVeE9nRUducHgxOFdBUlZGQVlZNW9VUUtDQVFFQThiUzV5VDNKCndTbWNYWTdtc05IckJxSy93UnhTZHVWUjB2dUdmNXRPNnZaZ3FHK2wzUUplRC9tRnhUV04vQVBKUGhUdC9qWEoKdGhyQzJiMU5qU1NqTFlXaTNseXMzUlhHZjBjSmk3L3E0OUxsTFNIQlJncUtyOWxodnZaWDVsVVhmRnJaUk5SUAp0cGR2eU8rWnBIOWJxSHNqclZqS28rN3luSGcveEROZFpjWmR1SlIyVzc0N3A3dkV2L3lKZWR4Q2VId2hvZzZoCnQ0dEpzYms3aFR3VUx5a05EZHNuaDhaTXFTenlkTDBid210Z0lvS3BieXZ1M29GRlcvaExMak9RTWFwNEE4cE8KTmdSNGNNTmhod3IwRml3TGlaNlErQWdlSjFUN1A3c1FBUDNxK3RVQXFJekhFS0pQa1RDM0Y4Ykxic2YxLzFYbgpRcjdzMzFkK3krUklDUUtDQVFFQTQydDdLQ2RoODNvVENveXA1VzljZU1acjR3ZXMwS2N5ZzJzbmVFRjFlbGZNCm1RY3ZLcVhlYkoyY0o2cGQ2QVk0ZnBSdTh2MWQ1UjJSa1lOdTBzVDd6SjBTREM0ZUhjM0JDdXpsNDdLUWtvSmwKN1ZIUFQ3UGNKSndwZVJ0NEhsTVJMejBLYW15blFIbnlEWXdSOE9WTllUVS81eXZqK3l6NDIxS2dhNUt1bGhmSwprRktEaGRuaWVGa1czS2ZENE1GaDRrTDZ5bHUvbU9FN3hyS2xWMExrSUEwRnBWS0U3aDlBVVN6NHZ4dlMzV1c0ClZ3MGZEbzVCbDRFVFJMbnJJY1FycEViZU4vTElvZjVRejYrWjNGSGR0dS9VVktFNVFsMnhrc1J0R0ZBMDBmeWIKeWN2eTJsVWVReUJ0VncrZ1JnZUFXM2FBNFNrbFUrNnFCY0hCOXZ1SjB3S0NBUUVBd0FCc1JPd01SS0VsVVR5ZgpESDcwVDhVZ3hlb1ZwOVRxZHNyUFFMYkNyZXNoUlN2TGVoRFRYNlU3R2prOG5LRDFUNWVZcG9OYnhJamxsOG5FCnZRWUppYlBLZVJEdFVJSm50OXRhUGVVcVZlZkZuV0JmQTZDRUlzUnYzUjRiSFNFakV1bW9CZ0VSZ1Y0eXNrK0MKb1NWNlRnL2plMlE1TkpndnFSUHNzNUtKOHJyczRCOHZGaG03a2JhYXlGZDNiWklHUzJkdjRDZjNWcklTekZiMApiUllZZ28zOWpMQTJhcWlmWlJRTFZhaVRVSkd6UURiREdVaXc2NWVNM1U0VGlwUHpTMEM3TFdlYlVWV2p4dyt0CmZYUzZDSkxjWjJuS2h2MEwxdnF1eXlWeHhSZnZmV21PcUZXTUhDNlRQaWFRaXhhanExQzBuU3hFRk1WTnJPejQKRUVjNjRRS0NBUUErL3dUc2lJdy9qNjg2bXVCdEo3M3J6cnNQOW81T2RpSXQrVDdEdHc0OXg1aHJRMnd6V2lNVQozMHZrU1BNZVZLck5sWHh1WHZUbGhKMVFPNkkxVEUrYnpGNjFkUWp1cEpJMjNveUgyR3pueUt0SFpBUVRSZlZUClJ0Yk9MMmZFcnFueDlleXVzazVhTSsxekJ6dnBDUHU0VTdIUjdYeUhsVnVTRlg5T2pTRkRmbStrTHRjeitya2IKTVVKOStSTHZiV0laOVFmWGlqYTJ1SjJBV3ZnbUJlZC9ZVndSQVp6RkFXOGxqVm1TUnJqUWoxN1M3bFdPQ0tYdQp1OWlFanlPdEJOUTUrMCtQRy9lcnQvRFd0d1BkM2VlV3h6U0FCUEVCaTBhbkt6WTFKL0tad0dtL0tubXBOUzdlCjFWcTBaU1cyZ0Zsei9JMlMwWHovbFBzUUFTNGpwbVgxQW9JQkFRRGRicWhvVGVXR1doYUVRaGsxTG5vMUx6VTUKemdLUG9WS0kwQjF3YkltNFBTTk1ZWTQzU3pxRDVubDJtVjdrU25TSStPOXFSd0FrcjNJY2NwekgvalZKODJ5UQpIemRXcG1rdVVTSUpSMG1SVlhhcEYzSS9ITUk4M2RYZnFBYjFucXE0KzYwdS9GNVZMTmNPRmhNOUFqUktieW52CmpTWlZZY3dpMFRLbk1BeUJ2V0diVGhEWGF3NFBvWGh3NUZXMWpwYmRRV2hDNTFiK1lrcCtaU1hkbUF0aldESUwKU2tPWkF0eTZLZVdHZkZFcGxCbUhjYnJJMCtJUi9KYXltbGJXUk1JeWlFeGtaM29JZGRNWjVkWS9HQ0I1ZldFTgpqdUwvckVLY2pwQ1FiMWxNRFNEVlh2dmRKRkl5SzFBM1ZRbWowUWdBS1ZxSG0rd2lPdmNrbXQrM21hTjgKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
    kind: Secret
    metadata:
    creationTimestamp: "2022-08-03T14:48:35Z"
    name: domain-cert
    namespace: default
    resourceVersion: "127687"
    uid: 8e9c8f04-2d46-458e-b4dc-5520c44c8a9d
    type: kubernetes.io/tls

    ```
</details>

<details>
  <summary>kubectl get secret domain-cert -o json</summary>
    ```json

    {
        "apiVersion": "v1",
        "data": {
            "tls.crt": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZiVENDQTFXZ0F3SUJBZ0lVVkJXYTFXREtWc2Q5bmRiZ0h4T1J3SnZKRy8wd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1JqRUxNQWtHQTFVRUJoTUNVbFV4RHpBTkJnTlZCQWdNQmsxdmMyTnZkekVQTUEwR0ExVUVCd3dHVFc5egpZMjkzTVJVd0V3WURWUVFEREF4elpYSjJaWEl1Ykc5allXd3dIaGNOTWpJd09EQXpNVFEwTnpNeVdoY05Nekl3Ck56TXhNVFEwTnpNeVdqQkdNUXN3Q1FZRFZRUUdFd0pTVlRFUE1BMEdBMVVFQ0F3R1RXOXpZMjkzTVE4d0RRWUQKVlFRSERBWk5iM05qYjNjeEZUQVRCZ05WQkFNTURITmxjblpsY2k1c2IyTmhiRENDQWlJd0RRWUpLb1pJaHZjTgpBUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBTmE0dTQ3WGxuVm5GWCtTaUplUEtWYUh5NnBmVU5pbkZDeWFOaEI5CmZEbmRGME9xYndPQWM1bk5RVU92Vm0yMkdyaXpnT3pQanArMk1UcC9hT3V2SHl1VlVONUVvWlp5UXNCbXp3aUUKTzByaVkzZ3paM0ZCNy9FcmlwVE0xRmsvZUZaWVJGSnBuRDZLYzF3Nlp4c1NxMDB5OXJFY1pEMGtQS250ajN1OQpGTG0yMFNkT3NIMFFQc29NTDNScGM2WmtkazdxbGVPSkRhcVd3dC9pSEdZYXpkZldOZUNmUTZJL3VhN3pjOEViCjgzdGgrR3cxRXFpN2xzOC9iZktHbVQra3l2MmxxUCtFL211S3Awd0lheEw2RlV0dzB4VUtQVVNyN2N6RjN5bmIKZUx6QTVWQjlMaHltV3FPdFUvVXJHeFc2MkhaRThXWGJ1ZTltUlRCeXNwektKWVJFdlJOUXZDUzdVSGhtVGxrcwpJOHpuSmJ2YmU0YTY3K1ZObDQvQU5qTS92Z3owWks3ZmVmTXNub09oU0JvV1NxQ2Q2djg4THgyQmlldzNzV3cxCkhlQng0am1sY1NSMk5rTGpNam82Wlp5NjEzbVZJb2xCK1ZPV1lQUTZHaHB1MjJ0TW5YRkR0RVJ2RjhBV3FUb2EKM3hwVDVZa240VFoxdThOQ214YUxFWlBmTWRwM1RSYy9jZktHbENBQnZHTDI2Ky8rSzc4VS9UVUtUeXJpcTlEdgpSbTZieFg0NCtscjRDOGdjUXV6Sm00NklZOWU5NUdsUGhjQ3FxcTVwSy9mL0lTcS9HMXdMMVQ1cEJxUG5yeS9lClM3bEl1UmpLUTIwUUFZY1RJUlIrTEVYYnhGZElYUlFpcmdwWmlWVGJOWURaVjlCbTExaTN3ejhTSjVhOVZuTisKaHpCckFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCUitlSlFVMnFWRytqZENQMkxONzVNcTJYdGxkekFmQmdOVgpIU01FR0RBV2dCUitlSlFVMnFWRytqZENQMkxONzVNcTJYdGxkekFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHCkNTcUdTSWIzRFFFQkN3VUFBNElDQVFCZlprUEFyNHVkc2JJdUZtQm1Nc3UwT3ZOTlRlT2VQdFlOaEdFQmRwV3QKQ3dvd0NCa21sME5FSVJjY0EzTkNzU2N3UEEyQjhycy9yckhsMWV3YnRienNPWHc3ZGN4MWdpSS9VMFR2L1Y1cgpWSDNZMFZGYmlIS3BBOW9oRGp2NXhSL0hMNFN3TG5zdnNjSThTd0Q1dXlJR1hvcUZmeDk1NTNEZE12QVUwYzFCCmpMRjZ0cnBCcmZTM3NiUEVyaVE1QjVyRnlKMGVhWDIxc2ViNW9uNFZZaCtQWUdLOHJFMzcrZjRxQStHN1kvUUEKVzVNSlpSZVFUT0ZVc0Q1cWhaMkJnMVdObi9PRTlPRVU4SEVDNi9oQlY0bm04b1g4VjNrUE1SajRqejhkbm1VbgpPL3U2cmlhbXZBUHc4L0ZiZlJrdGY5aklzdmtCd2xjWDNIRU9icmIxWTlVV3dJSldJNnFaaXFoMXdEQlNvNENsCmp1aDhXR0o5ZEp6QXc1OWxML3NVUG5ISkNxR0VrRjZJNVBlK3V5a3preEVtUGR0UDdwMXBMaGNyR3FLVDZNekIKOUsyRnRSdU5WSnJQTkFvQVBqS0tkK2xYU21MSHNzbGwyRURmODcxY0gyak5sYWx0Y2szVWdTVTkzcGpBT1ZLYgpNaU1mZ3c4OHBLRmU5eU1UVHFHM0srbm1oUHh3VkRTTDRqY2NKR0RDK3NvWUptZHBmOFdhTDN6UkFqaStxMTcwClpHTnNPZ3cvTkx1NTgzbFNkOERXL1l1WE5QL0tLQ3B6SmszTTBJL0ZUMElva01WbVY2dXNab0lQTWRRbzJITUcKd0FPYUF1VER5ZU94ZjlpQldES2g4ZXQvMDdleUI4d25POHRKM3hzdlVQRFFkTC9tYmcvUG56YUEwNlJZVnlSUwo3Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
            "tls.key": "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBMXJpN2p0ZVdkV2NWZjVLSWw0OHBWb2ZMcWw5UTJLY1VMSm8yRUgxOE9kMFhRNnB2CkE0QnptYzFCUTY5V2JiWWF1TE9BN00rT243WXhPbjlvNjY4Zks1VlEza1NobG5KQ3dHYlBDSVE3U3VKamVETm4KY1VIdjhTdUtsTXpVV1Q5NFZsaEVVbW1jUG9welhEcG5HeEtyVFRMMnNSeGtQU1E4cWUyUGU3MFV1YmJSSjA2dwpmUkEreWd3dmRHbHpwbVIyVHVxVjQ0a05xcGJDMytJY1pock4xOVkxNEo5RG9qKzVydk56d1J2emUySDRiRFVTCnFMdVd6ejl0OG9hWlA2VEsvYVdvLzRUK2E0cW5UQWhyRXZvVlMzRFRGUW85Ukt2dHpNWGZLZHQ0dk1EbFVIMHUKSEtaYW82MVQ5U3NiRmJyWWRrVHhaZHU1NzJaRk1IS3luTW9saEVTOUUxQzhKTHRRZUdaT1dTd2p6T2NsdTl0NwpocnJ2NVUyWGo4QTJNeisrRFBSa3J0OTU4eXllZzZGSUdoWktvSjNxL3p3dkhZR0o3RGV4YkRVZDRISGlPYVZ4CkpIWTJRdU15T2pwbG5MclhlWlVpaVVINVU1Wmc5RG9hR203YmEweWRjVU8wUkc4WHdCYXBPaHJmR2xQbGlTZmgKTm5XN3cwS2JGb3NSazk4eDJuZE5Gejl4OG9hVUlBRzhZdmJyNy80cnZ4VDlOUXBQS3VLcjBPOUdicHZGZmpqNgpXdmdMeUJ4QzdNbWJqb2hqMTcza2FVK0Z3S3Fxcm1rcjkvOGhLcjhiWEF2VlBta0dvK2V2TDk1THVVaTVHTXBECmJSQUJoeE1oRkg0c1JkdkVWMGhkRkNLdUNsbUpWTnMxZ05sWDBHYlhXTGZEUHhJbmxyMVdjMzZITUdzQ0F3RUEKQVFLQ0FnQW15RFR3SnRaQkhENVF6V21vWGk0c045aThTL3p4TkxRN0hodFh2U0o3M1FmL3E3L2pWUWNNSjN0NwpPeWNVSjhrSnhUb3JDNDRLSU1FaGZMTzVwZWF1VzRqQXJJcTIvcW81MEJmaXhPZGtyaUVqSzcycVFpdVJWcmp3CkNWTHRUNzV2Y2YvZEZzQW10NkVBYm5nQzlzdEQ1VW1UVWJwMUpKOWtYY2tGbzNBajN2WkY4RHVHU3pIY0VubGIKd0ZRb0lJc1IwK01BdHRkbUVWYmZVeHFvQW4xZFY0NWhwTUoxZ3FjS0IyVEg0MEdGN25zTktFVFhmeEpOR25yRQpURFZQdm5iL2V6VmIrV3h1aGh1VGF3M1QzcUdMLzdQUVlBb1M1aTdNUm96NUpXL1lQOHJyVDhETlllcUxGNXBMCmRONnVmUkh0d3FRTExyV1ZuTll3V3ZjUnhKMGp3djhGVnhrQlg0aER3VTN3MXNtVUtObHcvdDNyVkJjR0EzK3IKdUNFWEdaTU5SMmNZYXBleE5IZ1EyS0hjZmkwWHhUMnlqM0tVeG1YRVVpT2tUcERpcGp0TVFPbXNEYzh5a1c5VQptUFZ5ODhuRGxWc1hCUnliZUtjSlQxbXAveWFGQ1VwVWVSU2VVR2h1QzQ5dTU0TG5CVzAxL1RqQVBDNmdyandQCkpVd3VIZ3dXNmJSOTUxNlpzMjJYTDk4NndBR1FQZE00U2RSRE01YlJJN0NxcnVtaDMxQWtMb1Y2bTMxR1B1aXoKNVpYQ2hpSkRNNWRKZUxzWXI3b2J6RnJaZGNhNUJwb1ZkTEY0TEFRVE1STjVzeDZGWnRsTjE2c01kU0pyNmtPdApmekdFMjA2QVA5cngxWXJzd085T3NJNUJVTlBVeE9nRUducHgxOFdBUlZGQVlZNW9VUUtDQVFFQThiUzV5VDNKCndTbWNYWTdtc05IckJxSy93UnhTZHVWUjB2dUdmNXRPNnZaZ3FHK2wzUUplRC9tRnhUV04vQVBKUGhUdC9qWEoKdGhyQzJiMU5qU1NqTFlXaTNseXMzUlhHZjBjSmk3L3E0OUxsTFNIQlJncUtyOWxodnZaWDVsVVhmRnJaUk5SUAp0cGR2eU8rWnBIOWJxSHNqclZqS28rN3luSGcveEROZFpjWmR1SlIyVzc0N3A3dkV2L3lKZWR4Q2VId2hvZzZoCnQ0dEpzYms3aFR3VUx5a05EZHNuaDhaTXFTenlkTDBid210Z0lvS3BieXZ1M29GRlcvaExMak9RTWFwNEE4cE8KTmdSNGNNTmhod3IwRml3TGlaNlErQWdlSjFUN1A3c1FBUDNxK3RVQXFJekhFS0pQa1RDM0Y4Ykxic2YxLzFYbgpRcjdzMzFkK3krUklDUUtDQVFFQTQydDdLQ2RoODNvVENveXA1VzljZU1acjR3ZXMwS2N5ZzJzbmVFRjFlbGZNCm1RY3ZLcVhlYkoyY0o2cGQ2QVk0ZnBSdTh2MWQ1UjJSa1lOdTBzVDd6SjBTREM0ZUhjM0JDdXpsNDdLUWtvSmwKN1ZIUFQ3UGNKSndwZVJ0NEhsTVJMejBLYW15blFIbnlEWXdSOE9WTllUVS81eXZqK3l6NDIxS2dhNUt1bGhmSwprRktEaGRuaWVGa1czS2ZENE1GaDRrTDZ5bHUvbU9FN3hyS2xWMExrSUEwRnBWS0U3aDlBVVN6NHZ4dlMzV1c0ClZ3MGZEbzVCbDRFVFJMbnJJY1FycEViZU4vTElvZjVRejYrWjNGSGR0dS9VVktFNVFsMnhrc1J0R0ZBMDBmeWIKeWN2eTJsVWVReUJ0VncrZ1JnZUFXM2FBNFNrbFUrNnFCY0hCOXZ1SjB3S0NBUUVBd0FCc1JPd01SS0VsVVR5ZgpESDcwVDhVZ3hlb1ZwOVRxZHNyUFFMYkNyZXNoUlN2TGVoRFRYNlU3R2prOG5LRDFUNWVZcG9OYnhJamxsOG5FCnZRWUppYlBLZVJEdFVJSm50OXRhUGVVcVZlZkZuV0JmQTZDRUlzUnYzUjRiSFNFakV1bW9CZ0VSZ1Y0eXNrK0MKb1NWNlRnL2plMlE1TkpndnFSUHNzNUtKOHJyczRCOHZGaG03a2JhYXlGZDNiWklHUzJkdjRDZjNWcklTekZiMApiUllZZ28zOWpMQTJhcWlmWlJRTFZhaVRVSkd6UURiREdVaXc2NWVNM1U0VGlwUHpTMEM3TFdlYlVWV2p4dyt0CmZYUzZDSkxjWjJuS2h2MEwxdnF1eXlWeHhSZnZmV21PcUZXTUhDNlRQaWFRaXhhanExQzBuU3hFRk1WTnJPejQKRUVjNjRRS0NBUUErL3dUc2lJdy9qNjg2bXVCdEo3M3J6cnNQOW81T2RpSXQrVDdEdHc0OXg1aHJRMnd6V2lNVQozMHZrU1BNZVZLck5sWHh1WHZUbGhKMVFPNkkxVEUrYnpGNjFkUWp1cEpJMjNveUgyR3pueUt0SFpBUVRSZlZUClJ0Yk9MMmZFcnFueDlleXVzazVhTSsxekJ6dnBDUHU0VTdIUjdYeUhsVnVTRlg5T2pTRkRmbStrTHRjeitya2IKTVVKOStSTHZiV0laOVFmWGlqYTJ1SjJBV3ZnbUJlZC9ZVndSQVp6RkFXOGxqVm1TUnJqUWoxN1M3bFdPQ0tYdQp1OWlFanlPdEJOUTUrMCtQRy9lcnQvRFd0d1BkM2VlV3h6U0FCUEVCaTBhbkt6WTFKL0tad0dtL0tubXBOUzdlCjFWcTBaU1cyZ0Zsei9JMlMwWHovbFBzUUFTNGpwbVgxQW9JQkFRRGRicWhvVGVXR1doYUVRaGsxTG5vMUx6VTUKemdLUG9WS0kwQjF3YkltNFBTTk1ZWTQzU3pxRDVubDJtVjdrU25TSStPOXFSd0FrcjNJY2NwekgvalZKODJ5UQpIemRXcG1rdVVTSUpSMG1SVlhhcEYzSS9ITUk4M2RYZnFBYjFucXE0KzYwdS9GNVZMTmNPRmhNOUFqUktieW52CmpTWlZZY3dpMFRLbk1BeUJ2V0diVGhEWGF3NFBvWGh3NUZXMWpwYmRRV2hDNTFiK1lrcCtaU1hkbUF0aldESUwKU2tPWkF0eTZLZVdHZkZFcGxCbUhjYnJJMCtJUi9KYXltbGJXUk1JeWlFeGtaM29JZGRNWjVkWS9HQ0I1ZldFTgpqdUwvckVLY2pwQ1FiMWxNRFNEVlh2dmRKRkl5SzFBM1ZRbWowUWdBS1ZxSG0rd2lPdmNrbXQrM21hTjgKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K"
        },
        "kind": "Secret",
        "metadata": {
            "creationTimestamp": "2022-08-03T14:48:35Z",
            "name": "domain-cert",
            "namespace": "default",
            "resourceVersion": "127687",
            "uid": "8e9c8f04-2d46-458e-b4dc-5520c44c8a9d"
        },
        "type": "kubernetes.io/tls"
    }
    ```
</details>


### Как выгрузить секрет и сохранить его в файл?

```console
kubectl get secrets -o json > secrets.json
kubectl get secret domain-cert -o yaml > domain-cert.yml
```
[secrets.json](./secrets.json)

[domain-cert.yml](./domain-cert.yml)

### Как удалить секрет?

```console
root@control-plane-node-01:~/certs# kubectl delete secret domain-cert
secret "domain-cert" deleted
```

### Как загрузить секрет из файла?

```console
root@control-plane-node-01:~/certs# kubectl apply -f domain-cert.yml
secret/domain-cert created
```

## 2
- Переключил пространсто имен.
- Создал в нем секрет nginx-cert на основе ранее созданных сертификатов.
- применил [env_secret.yml](./pod/pod.yml) (разумеется не забыв в нем прописать целевое пространсво имен)
- применил [configMap.yml](pod/configMap.yml) (разумеется не забыв в нем прописать целевое пространсво имен)
- применил [pod.yml](pod/pod.yml)

```console
kubectl config set-context --current --namespace stage
root@control-plane-node-01:~/certs# kubectl create secret tls nginx-cert --cert=cert.crt --key=cert.key -n stage
secret/nginx-cert created
root@control-plane-node-01:~/devops-netology/14.1/pod# kubectl apply -f env_secret.yml 
secret/mysecret created
root@control-plane-node-01:~/devops-netology/14.1/pod# kubectl apply -f configMap.yml 
configmap/nginx-config created
root@control-plane-node-01:~/devops-netology/14.1/pod# kubectl get secrets 
NAME         TYPE                DATA   AGE
mysecret     Opaque              2      11m
nginx-cert   kubernetes.io/tls   2      57m
root@control-plane-node-01:~/devops-netology/14.1/pod# kubectl exec -it  my-pod -c nginx -- sh
# echo $SECRET_PASSWORD
Kr1pT0$t0yK0$tb
# echo $SECRET_USERNAME
megasudouser
# ls /etc/nginx/ssl
tls.crt  tls.key

```




## Задача 1: Работа с секретами через утилиту kubectl в установленном minikube

Выполните приведённые ниже команды в консоли, получите вывод команд. Сохраните
задачу 1 как справочный материал.

### Как создать секрет?

```
openssl genrsa -out cert.key 4096
openssl req -x509 -new -key cert.key -days 3650 -out cert.crt \
-subj '/C=RU/ST=Moscow/L=Moscow/CN=server.local'
kubectl create secret tls domain-cert --cert=certs/cert.crt --key=certs/cert.key
```

### Как просмотреть список секретов?

```
kubectl get secrets
kubectl get secret
```

### Как просмотреть секрет?

```
kubectl get secret domain-cert
kubectl describe secret domain-cert
```

### Как получить информацию в формате YAML и/или JSON?

```
kubectl get secret domain-cert -o yaml
kubectl get secret domain-cert -o json
```

### Как выгрузить секрет и сохранить его в файл?

```
kubectl get secrets -o json > secrets.json
kubectl get secret domain-cert -o yaml > domain-cert.yml
```

### Как удалить секрет?

```
kubectl delete secret domain-cert
```

### Как загрузить секрет из файла?

```
kubectl apply -f domain-cert.yml
```

## Задача 2 (*): Работа с секретами внутри модуля

Выберите любимый образ контейнера, подключите секреты и проверьте их доступность
как в виде переменных окружения, так и в виде примонтированного тома.

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

В качестве решения прикрепите к ДЗ конфиг файлы для деплоя. Прикрепите скриншоты вывода команды kubectl со списком запущенных объектов каждого типа (deployments, pods, secrets) или скриншот из самого Kubernetes, что сервисы подняты и работают, а также вывод из CLI.

---
